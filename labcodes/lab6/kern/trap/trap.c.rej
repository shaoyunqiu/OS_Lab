--- kern/trap/trap.c
+++ kern/trap/trap.c
@@ -230,7 +237,13 @@ trap_dispatch(struct trapframe *tf) {
         /* you should upate you lab1 code (just add ONE or TWO lines of code):
          *    Every TICK_NUM cycle, you should set current process's current->need_resched = 1
          */
-  
+        ticks ++;
+        if (ticks % TICK_NUM == 0) {
+            //print_ticks();
+            assert(current != NULL) ;
+            current->need_resched = 1 ;
+        }
+        
         break;
     case IRQ_OFFSET + IRQ_COM1:
         c = cons_getc();
